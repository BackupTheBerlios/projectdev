# $Id: PKGBUILD,v 1.4 2004/11/10 22:33:56 blokkie Exp $
# Arch Maintainer: Judd Vinet <jvinet@zeroflux.org>
# Maintainer: blokkie <t.fernagut@burningfrog.be>

pkgname=e16
pkgver=0.16.7.1
pkgrel=2
pkgdesc="A fast, flexible, and very extensible Window Manager"
depends=('x-server' 'esd' 'imlib2-cvs' 'perl')
source=(http://telia.dl.sourceforge.net/sourceforge/$pkgname/enlightenment-$pkgver.tar.gz \
  http://telia.dl.sourceforge.net/sourceforge/$pkgname/enlightenment-theme-BlueSteel-0.16.tar.gz \
  http://telia.dl.sourceforge.net/sourceforge/$pkgname/enlightenment-theme-BrushedMetal-Tigert-0.16.tar.gz \
  http://telia.dl.sourceforge.net/sourceforge/$pkgname/enlightenment-theme-Ganymede-0.16.tar.gz \
  http://telia.dl.sourceforge.net/sourceforge/$pkgname/enlightenment-theme-ShinyMetal-0.16.tar.gz \
  enlightenment.desktop e_gen_menu.patch)
md5sums=('1439839c3023914a62f8254cc31085fc' '15b713cb11071116cfb4bedd99853d7a'\
         'e26afc428365f3e6c4ac4a3ecae81540' '15d97ff251beb62ee481e2c67fe9a86d'\
         '177044a975becdf1a1695a3dc2c63932' '0aa47865d74d9104a624ab7e817546b1'\
         '46f3dd6672b8003943ece8fa914ac2b3')

build() {
  cd $startdir/src/enlightenment-$pkgver/scripts
  patch -Np0 -i $startdir/src/e_gen_menu.patch || return 1
  cd $startdir/src/enlightenment-$pkgver
  ./configure --prefix=/usr --enable-fsstd --enable-sound --sysconfdir=/etc
  make || return 1
  make DESTDIR=$startdir/pkg install
  rm -rf $startdir/pkg/opt/share
  install -D -m644 ../enlightenment.desktop $startdir/pkg/etc/X11/sessions/enlightenment.desktop
  for theme in BlueSteel BrushedMetal-Tigert Ganymede ShinyMetal; do
    cd $startdir/src/enlightenment-theme-$theme-0.16
    ./configure --prefix=/usr --enable-fsstd
    make DESTDIR=$startdir/pkg install
  done
  chown -R root.root $startdir/pkg/usr/share/*
}
